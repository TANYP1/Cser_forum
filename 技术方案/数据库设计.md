# 一.用户登录以及注册部分

## 数据库设计

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY COMMENT '用户主键id', 
    username VARCHAR(50) NOT NULL UNIQUE COMMENT '用户姓名', 
    password_hash CHAR(60) NOT NULL COMMENT '用户密码', 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '账户创建时间',
    email VARCHAR(50) UNIQUE COMMENT '用户邮箱', 
    phone_number VARCHAR(50) NOT NULL UNIQUE COMMENT '用户电话'
);
CREATE TABLE sessions (
    session_id CHAR(128) PRIMARY KEY COMMENT '会话唯一标识（通常为 UUID 或加密字符串）',
    user_id INT NOT NULL COMMENT '关联的用户 ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '会话创建时间',
    expires_at TIMESTAMP NOT NULL COMMENT '会话过期时间',
    FOREIGN KEY (user_id) REFERENCES users(id) 
);
```mermaid
classDiagram
    class users {
        +id : INT [PK, AUTO_INCREMENT]
        +username : VARCHAR(50) [NOT NULL, UNIQUE]
        +password_hash : CHAR(60) [NOT NULL]
        +email : VARCHAR(100) [NOT NULL, UNIQUE]
        +created_at : TIMESTAMP [DEFAULT CURRENT_TIMESTAMP]
        +phone_number: VARCHAR(50) [NOT NULL UNIQUE]
        +__contains_hashed_passwords__()
    }

    class sessions {
        +session_id : CHAR(128) [PK]
        +user_id : INT [FK]
        +created_at : TIMESTAMP [DEFAULT CURRENT_TIMESTAMP]
        +expires_at : TIMESTAMP [NOT NULL]
    }

    users "1" -- "0..*" sessions : "has"
    ```
